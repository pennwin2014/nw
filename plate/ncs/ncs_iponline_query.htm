<html>

<head>
<title>查询</title>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312">
<META HTTP-EQUIV="Expires" CONTENT="0">
<META HTTP-EQUIV="Cache-Control" CONTENT="no-cache, must-revalidate">
<META HTTP-EQUIV="Pragma" CONTENT="no-cache">
<META HTTP-EQUIV="Jon Eyrick" CONTENT="no-cache">
<link rel="stylesheet" href="/css/css.css" type="text/css">
<!-- Infrastructure code for the tree -->
<script>
	function init()
	{
	  form1.groupid.value=dialogArguments.form1.groupid.value;
		form1.service.value=dialogArguments.form1.service.value;
		form1.prot.value=dialogArguments.form1.prot.value;
		form1.slip.value=dialogArguments.form1.slip.value;
		form1.suip.value=dialogArguments.form1.suip.value;
		form1.sf.value=dialogArguments.form1.sf.value;
		form1.dlip.value=dialogArguments.form1.dlip.value;
		form1.duip.value=dialogArguments.form1.duip.value;
		form1.df.value=dialogArguments.form1.df.value;
		form1.dport.value=dialogArguments.form1.dport.value;
		form1.fl.value=dialogArguments.form1.fl.value;
		form1.fu.value=dialogArguments.form1.fu.value;
		form1.dr.value=dialogArguments.form1.dr.value;
		
		form1.username.value=dialogArguments.form1.username.value;
	
		}
function queren()
{

dialogArguments.form1.service.value=form1.service.value;
dialogArguments.form1.groupid.value=form1.groupid.value;
dialogArguments.form1.prot.value=form1.prot.value;
dialogArguments.form1.slip.value=form1.slip.value;
dialogArguments.form1.suip.value=form1.suip.value;
dialogArguments.form1.sf.value=form1.sf.value;
dialogArguments.form1.dlip.value=form1.dlip.value;
dialogArguments.form1.duip.value=form1.duip.value;
dialogArguments.form1.df.value=form1.df.value;
dialogArguments.form1.dport.value=form1.dport.value;
dialogArguments.form1.fl.value=form1.fl.value;

dialogArguments.form1.fu.value=form1.fu.value;
dialogArguments.form1.dr.value=form1.dr.value;
dialogArguments.form1.username.value=form1.username.value;
dialogArguments.form1.userid.value="";
dialogArguments.form1.submit();
self.close();

}
function clear0()
{
	form1.groupid.value="";
	form1.service.value="";
	form1.fl.value="";
	form1.fu.value="";
	form1.dr.value="";
	form1.prot.value="";
	form1.dport.value="";
	form1.slip.value="";
	form1.suip.value="";
	form1.sf.value="";
	form1.dlip.value="";
	form1.duip.value="";
	form1.df.value="";
	form1.username.value="";
	dialogArguments.form1.userid.value="";
}

function changservice(){
callServer();

}
	var xmlHttp = false;

//调用AJAX
 function callServer() 
 { 
 
  if( xmlHttp && xmlHttp .readyState != 0 )
   {
    xmlHttp.abort();
   }
   
   xmlHttp = createXMLHttpRequest();
 
   if( xmlHttp )
   {
   var web_url='/pronline/Msg?FunName@ncWebShowServiceDet&groupid@'+form1.serviceclass.value+'&xx@'+Math.random()*999;
    //打开连接
    xmlHttp.open("GET",web_url, true);
    //设置回调函数
    xmlHttp.onreadystatechange = updatePage;

    xmlHttp.send(null);
  
  }

 }
	
		 //ajax回调处理函数
 function updatePage() 
 {
  
   if (xmlHttp.readyState == 4) 
   {
    var response = xmlHttp.responseText;
//alert(response);         
//    document.getElementById("result").innerHTML = response;
var temp_id=getxmlbyname(response,"<sid>","</sid>");
var temp_name=getxmlbyname(response,"<sname>","</sname>");
var aid=new Array();
var aname=new Array();
aid=temp_id.split("|");
aname=temp_name.split("|");
var i;
document.all.service.length=aid.length;
for(i=0;i<aid.length;i++){
	document.all.service.options[i].value=aid[i];
 document.all.service.options[i].text=aname[i];
	}

   }
 
 }

</script>
<script src="/js/ajax.js"></script>
</head>

<body bgcolor="#DEE8FA" leftmargin="0" topmargin="0" marginheight="0"  oncontextmenu="return true" onload="init()">
  <form name="form1" method="post" action="/pronline/Msg" target="main">
  <input type="hidden" name="FunName" value="ncWebShowNewvister">
<table width="100%" border="0" align="center" cellpadding="0" cellspacing="0">

  <tr> 
    <td colspan="2"><table width="100%" height="27" border="0" align="center" cellpadding="0" cellspacing="0" background="/images/table_bg1.gif">
        <tr > 
          <td colspan="2" > <div align="center"><strong><font color="#FFFFFF">             
              实时IP访问过滤条件设置</font></strong></div></td>
        </tr>
      </table></td>
  </tr>
  <tr> 
    <td colspan="2"> 
        <br>
        <table width="98%" border="1"    bordercolorlight=#89ACED   bordercolordark=#ffffff    align="center" cellpadding="0" cellspacing="0" >
          <tr> 
            <td> 
             <table width="100%" border="0" align="center" >
                <tr>
                  <td colspan="4">&nbsp;</td>
                </tr>

                <tr height="35"> 
                  <td width="5%"></td>
                  <td width="20%" > <font color="#000000"><b><font size="2">部门</font></b></font></td>
                  <td colspan="2" align="left">
                   <select name="groupid" style="width:200">
                  <option value="">全部</option>
                  [#SLPB#]
                  <option value="[#gid#]">[#gname#]</option>
                  [#SLPE#]
                  </select>
                  </td>
                 
                </tr>


                <tr height="35"> 
                  <td width="5%"></td>
                  <td width="20%" > <font color="#000000"><b><font size="2">服务大类</font></b></font></td>
                  <td colspan="2" align="left">
                  <select name="serviceclass" style="width:90" onchange="changservice()">
          	  	     	<option value="" selected>全部</option>
          	  	     	[#SLPB#]
                      <option value="[#cgid#]">[#cgname#]</option>
                      [#SLPE#]
                  </select>
                  <font color="#000000"><b><font size="2">细分服务</font></b>
                  <select name="service" style="width:80">
                  <option value="">全部</option>
                  [#SLPB#]
                  <option value="[#id#]">[#name#]</option>
                  [#SLPE#]
                  </select>
                  </td>
                 
                </tr>











                <tr height="35"> 
                  <td ></td>
                  <td ><font color="#000000"><b><font size="2">流量</font></b></td>
                   <td colspan="2"><input name="fl" type="text" id="fl" value="" size="8" maxlength="8" >
                    到 
                    <input name="fu" type="text" id="fu" value="" size="8" maxlength="8" > 
                    Bytes
                    <b><font size="2">方向&nbsp;&nbsp;&nbsp;&nbsp;</font>
                  <select name="dr" style="width:80">
									<option value="2">所有</option>
									<option value="0">出流量</option>
									<option value="1">进流量</option>
									</select>
                    </td>
                </tr> 
                <tr height="35"> 
                  <td ></td>
                  <td ><font color="#000000"><b><font size="2">网络协议</font></b></td>
                  <td colspan="2"><select name="prot" style="width:200">
                  <option value="">全部</option>                  
                  <option value="6">TCP</option>
                 <option value="17">UDP</option>
                  </select>
                  <b><font size="2">访问端口</b>
                  <input type="text" name="dport" size="9" maxlength="5">
                  
                  </td>
                  
                </tr> 
                <tr height="35">
                  <td ></td>
                  <td > <font color="#000000"><b><font size="2">源IP地址</font></b></font></td>
                  <td colspan="2">             
                    <input name="slip" type="text" id="slip" value="" size="15" maxlength="15" >
                    到 
                    <input name="suip" type="text" id="suip" value="" size="15" maxlength="15" >
                    &nbsp;<select name="sf">
										<option value="" selected>以内</option>
										<option value="1">以外</option>
										</select>
									</td>
                 
                </tr>      	
                  	
                  	
                  	</td>
                  <td > </td>
                </tr> 
                <tr height="35"> 
                  <td ></td>
                  <td > <font color="#000000"><b><font size="2">目标IP地址</font></b></font></td>                 

                  <td colspan="2"> <input name="dlip" type="text" id="dlip" value="" size="15" maxlength="15" >
                    到 
                    <input name="duip" type="text" id="duip" value="" size="15" maxlength="15" >
                    &nbsp;<select name="df">
										<option value="" selected>以内</option>
										<option value="1">以外</option>
										</select>
										 </td>                
                  
                </tr>
             

                <tr height="35"> 
                  <td ></td>
                  <td> <font color="#000000"><b><font size="2">用户名</font></b></font></td>
                  <td > <input type="text" name="username" size="35"></td>
                  <td >&nbsp;&nbsp;</td>
                </tr> 

              </table>
              <p align="center"> 
              	<input name='Button' type='button' class='an3' onClick='queren()' value='确 认'> 
              	<input name='Button' type='button' class='an3' onClick='self.close()' value='返回'>
              	<input name='Button' type='button' class='an3' onClick='clear0()' value='清除'>
              	</p>
              	<br>
            </td>
          </tr>          
        </table>

      </td>
  </tr>
</table>
 </form>
</body>
</html>
